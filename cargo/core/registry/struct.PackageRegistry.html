<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="rustdoc">
    <meta name="description" content="API documentation for the Rust `PackageRegistry` struct in crate `cargo`.">
    <meta name="keywords" content="rust, rustlang, rust-lang, PackageRegistry">

    <title>cargo::core::registry::PackageRegistry - Rust</title>

    <link rel="stylesheet" type="text/css" href="../../../normalize.css">
    <link rel="stylesheet" type="text/css" href="../../../rustdoc.css">
    <link rel="stylesheet" type="text/css" href="../../../main.css">
    

    
    
</head>
<body class="rustdoc struct">
    <!--[if lte IE 8]>
    <div class="warning">
        This old browser is unsupported and will most likely display funky
        things.
    </div>
    <![endif]-->

    

    <nav class="sidebar">
        
        <p class='location'>Struct PackageRegistry</p><div class="block items"><a class="sidebar-title" href="#methods">Methods</a><div class="sidebar-links"><a href="#method.new">new</a><a href="#method.get">get</a><a href="#method.add_sources">add_sources</a><a href="#method.add_preloaded">add_preloaded</a><a href="#method.add_override">add_override</a><a href="#method.register_lock">register_lock</a><a href="#method.patch">patch</a><a href="#method.patches">patches</a><a href="#method.lock">lock</a></div><a class="sidebar-title" href="#implementations">Trait Implementations</a><div class="sidebar-links"><a href="#impl-Registry">Registry</a></div></div><p class='location'><a href='../../index.html'>cargo</a>::<wbr><a href='../index.html'>core</a>::<wbr><a href='index.html'>registry</a></p><script>window.sidebarCurrent = {name: 'PackageRegistry', ty: 'struct', relpath: ''};</script><script defer src="sidebar-items.js"></script>
    </nav>

    <nav class="sub">
        <form class="search-form js-only">
            <div class="search-container">
                <input class="search-input" name="search"
                       autocomplete="off"
                       placeholder="Click or press ‘S’ to search, ‘?’ for more options…"
                       type="search">
            </div>
        </form>
    </nav>

    <section id='main' class="content">
<h1 class='fqn'><span class='in-band'>Struct <a href='../../index.html'>cargo</a>::<wbr><a href='../index.html'>core</a>::<wbr><a href='index.html'>registry</a>::<wbr><a class="struct" href=''>PackageRegistry</a></span><span class='out-of-band'><span id='render-detail'>
                   <a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">
                       [<span class='inner'>&#x2212;</span>]
                   </a>
               </span><a class='srclink' href='../../../src/cargo/core/registry.rs.html#65-92' title='goto source code'>[src]</a></span></h1>
<pre class='rust struct'>pub struct PackageRegistry&lt;'cfg&gt; { /* fields omitted */ }</pre><div class='docblock'><p>This structure represents a registry of known packages. It internally
contains a number of <code>Box&lt;Source&gt;</code> instances which are used to load a
<code>Package</code> from.</p>

<p>The resolution phase of Cargo uses this to drive knowledge about new
packages as well as querying for lists of new packages. It is here that
sources are updated (e.g. network operations) and overrides are
handled.</p>

<p>The general idea behind this registry is that it is centered around the
<code>SourceMap</code> structure, contained within which is a mapping of a <code>SourceId</code> to
a <code>Source</code>. Each <code>Source</code> in the map has been updated (using network
operations if necessary) and is ready to be queried for packages.</p>
</div>
                    <h2 id='methods' class='small-section-header'>
                      Methods<a href='#methods' class='anchor'></a>
                    </h2>
                <h3 id='impl' class='impl'><span class='in-band'><code>impl&lt;'cfg&gt; <a class="struct" href="../../../cargo/core/registry/struct.PackageRegistry.html" title="struct cargo::core::registry::PackageRegistry">PackageRegistry</a>&lt;'cfg&gt;</code><a href='#impl' class='anchor'></a></span><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../../../src/cargo/core/registry.rs.html#103-319' title='goto source code'>[src]</a></span></h3>
<div class='impl-items'><h4 id='method.new' class="method"><span id='new.v' class='invisible'><code>pub fn <a href='#method.new' class='fnname'>new</a>(config: &amp;'cfg <a class="struct" href="../../../cargo/util/config/struct.Config.html" title="struct cargo::util::config::Config">Config</a>) -&gt; <a class="type" href="../../../cargo/util/errors/type.CargoResult.html" title="type cargo::util::errors::CargoResult">CargoResult</a>&lt;<a class="struct" href="../../../cargo/core/registry/struct.PackageRegistry.html" title="struct cargo::core::registry::PackageRegistry">PackageRegistry</a>&lt;'cfg&gt;&gt;</code></span><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../../../src/cargo/core/registry.rs.html#104-114' title='goto source code'>[src]</a></span></h4>
<h4 id='method.get' class="method"><span id='get.v' class='invisible'><code>pub fn <a href='#method.get' class='fnname'>get</a>(self, package_ids: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">&amp;[</a><a class="struct" href="../../../cargo/core/package_id/struct.PackageId.html" title="struct cargo::core::package_id::PackageId">PackageId</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">]</a>) -&gt; <a class="struct" href="../../../cargo/core/package/struct.PackageSet.html" title="struct cargo::core::package::PackageSet">PackageSet</a>&lt;'cfg&gt;</code></span><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../../../src/cargo/core/registry.rs.html#116-119' title='goto source code'>[src]</a></span></h4>
<h4 id='method.add_sources' class="method"><span id='add_sources.v' class='invisible'><code>pub fn <a href='#method.add_sources' class='fnname'>add_sources</a>(&amp;mut self, ids: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">&amp;[</a><a class="struct" href="../../../cargo/core/struct.SourceId.html" title="struct cargo::core::SourceId">SourceId</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">]</a>) -&gt; <a class="type" href="../../../cargo/util/errors/type.CargoResult.html" title="type cargo::util::errors::CargoResult">CargoResult</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>&gt;</code></span><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../../../src/cargo/core/registry.rs.html#157-162' title='goto source code'>[src]</a></span></h4>
<h4 id='method.add_preloaded' class="method"><span id='add_preloaded.v' class='invisible'><code>pub fn <a href='#method.add_preloaded' class='fnname'>add_preloaded</a>(&amp;mut self, source: <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;<a class="trait" href="../../../cargo/core/source/trait.Source.html" title="trait cargo::core::source::Source">Source</a> + 'cfg&gt;)</code></span><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../../../src/cargo/core/registry.rs.html#164-166' title='goto source code'>[src]</a></span></h4>
<h4 id='method.add_override' class="method"><span id='add_override.v' class='invisible'><code>pub fn <a href='#method.add_override' class='fnname'>add_override</a>(&amp;mut self, source: <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;<a class="trait" href="../../../cargo/core/source/trait.Source.html" title="trait cargo::core::source::Source">Source</a> + 'cfg&gt;)</code></span><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../../../src/cargo/core/registry.rs.html#174-177' title='goto source code'>[src]</a></span></h4>
<h4 id='method.register_lock' class="method"><span id='register_lock.v' class='invisible'><code>pub fn <a href='#method.register_lock' class='fnname'>register_lock</a>(&amp;mut self, id: <a class="struct" href="../../../cargo/core/package_id/struct.PackageId.html" title="struct cargo::core::package_id::PackageId">PackageId</a>, deps: <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="struct" href="../../../cargo/core/package_id/struct.PackageId.html" title="struct cargo::core::package_id::PackageId">PackageId</a>&gt;)</code></span><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../../../src/cargo/core/registry.rs.html#179-189' title='goto source code'>[src]</a></span></h4>
<h4 id='method.patch' class="method"><span id='patch.v' class='invisible'><code>pub fn <a href='#method.patch' class='fnname'>patch</a>(&amp;mut self, url: &amp;<a class="struct" href="https://docs.rs/url/1.6.0/url/struct.Url.html" title="struct url::Url">Url</a>, deps: <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">&amp;[</a><a class="struct" href="../../../cargo/core/dependency/struct.Dependency.html" title="struct cargo::core::dependency::Dependency">Dependency</a><a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.slice.html">]</a>) -&gt; <a class="type" href="../../../cargo/util/errors/type.CargoResult.html" title="type cargo::util::errors::CargoResult">CargoResult</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>&gt;</code></span><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../../../src/cargo/core/registry.rs.html#191-220' title='goto source code'>[src]</a></span></h4>
<h4 id='method.patches' class="method"><span id='patches.v' class='invisible'><code>pub fn <a href='#method.patches' class='fnname'>patches</a>(&amp;self) -&gt; &amp;<a class="struct" href="https://doc.rust-lang.org/nightly/std/collections/hash/map/struct.HashMap.html" title="struct std::collections::hash::map::HashMap">HashMap</a>&lt;<a class="struct" href="https://docs.rs/url/1.6.0/url/struct.Url.html" title="struct url::Url">Url</a>, <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="struct" href="../../../cargo/core/summary/struct.Summary.html" title="struct cargo::core::summary::Summary">Summary</a>&gt;&gt;</code></span><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../../../src/cargo/core/registry.rs.html#222-224' title='goto source code'>[src]</a></span></h4>
<h4 id='method.lock' class="method"><span id='lock.v' class='invisible'><code>pub fn <a href='#method.lock' class='fnname'>lock</a>(&amp;self, summary: <a class="struct" href="../../../cargo/core/summary/struct.Summary.html" title="struct cargo::core::summary::Summary">Summary</a>) -&gt; <a class="struct" href="../../../cargo/core/summary/struct.Summary.html" title="struct cargo::core::summary::Summary">Summary</a></code></span><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../../../src/cargo/core/registry.rs.html#272-274' title='goto source code'>[src]</a></span></h4>
<div class='docblock'><p>This function is used to transform a summary to another locked summary
if possible. This is where the concept of a lockfile comes into play.</p>

<p>If a summary points at a package id which was previously locked, then we
override the summary&#39;s id itself, as well as all dependencies, to be
rewritten to the locked versions. This will transform the summary&#39;s
source to a precise source (listed in the locked version) as well as
transforming all of the dependencies from range requirements on
imprecise sources to exact requirements on precise sources.</p>

<p>If a summary does not point at a package id which was previously locked,
or if any dependencies were added and don&#39;t have a previously listed
version, we still want to avoid updating as many dependencies as
possible to keep the graph stable. In this case we map all of the
summary&#39;s dependencies to be rewritten to a locked version wherever
possible. If we&#39;re unable to map a dependency though, we just pass it on
through.</p>
</div></div>
            <h2 id='implementations' class='small-section-header'>
              Trait Implementations<a href='#implementations' class='anchor'></a>
            </h2>
        <h3 id='impl-Registry' class='impl'><span class='in-band'><code>impl&lt;'cfg&gt; <a class="trait" href="../../../cargo/core/registry/trait.Registry.html" title="trait cargo::core::registry::Registry">Registry</a> for <a class="struct" href="../../../cargo/core/registry/struct.PackageRegistry.html" title="struct cargo::core::registry::PackageRegistry">PackageRegistry</a>&lt;'cfg&gt;</code><a href='#impl-Registry' class='anchor'></a></span><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../../../src/cargo/core/registry.rs.html#321-436' title='goto source code'>[src]</a></span></h3>
<div class='impl-items'><h4 id='method.query' class="method"><span id='query.v' class='invisible'><code>fn <a href='../../../cargo/core/registry/trait.Registry.html#tymethod.query' class='fnname'>query</a>(&amp;mut self, dep: &amp;<a class="struct" href="../../../cargo/core/dependency/struct.Dependency.html" title="struct cargo::core::dependency::Dependency">Dependency</a>, f: &amp;mut <a class="trait" href="https://doc.rust-lang.org/nightly/core/ops/function/trait.FnMut.html" title="trait core::ops::function::FnMut">FnMut</a>(<a class="struct" href="../../../cargo/core/summary/struct.Summary.html" title="struct cargo::core::summary::Summary">Summary</a>)) -&gt; <a class="type" href="../../../cargo/util/errors/type.CargoResult.html" title="type cargo::util::errors::CargoResult">CargoResult</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>&gt;</code></span><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../../../src/cargo/core/registry.rs.html#322-427' title='goto source code'>[src]</a></span></h4>
<div class='docblock'><p>Attempt to find the packages that match a dependency request.</p>
</div><h4 id='method.supports_checksums' class="method"><span id='supports_checksums.v' class='invisible'><code>fn <a href='../../../cargo/core/registry/trait.Registry.html#tymethod.supports_checksums' class='fnname'>supports_checksums</a>(&amp;self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a></code></span><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../../../src/cargo/core/registry.rs.html#429-431' title='goto source code'>[src]</a></span></h4>
<div class='docblock'><p>Returns whether or not this registry will return summaries with checksums listed. <a href="../../../cargo/core/registry/trait.Registry.html#tymethod.supports_checksums">Read more</a></p>
</div><h4 id='method.requires_precise' class="method"><span id='requires_precise.v' class='invisible'><code>fn <a href='../../../cargo/core/registry/trait.Registry.html#tymethod.requires_precise' class='fnname'>requires_precise</a>(&amp;self) -&gt; <a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.bool.html">bool</a></code></span><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../../../src/cargo/core/registry.rs.html#433-435' title='goto source code'>[src]</a></span></h4>
<div class='docblock'><p>Returns whether or not this registry will return summaries with the <code>precise</code> field in the source id listed. <a href="../../../cargo/core/registry/trait.Registry.html#tymethod.requires_precise">Read more</a></p>
</div><h4 id='method.query_vec' class="method"><span id='query_vec.v' class='invisible'><code>fn <a href='../../../cargo/core/registry/trait.Registry.html#method.query_vec' class='fnname'>query_vec</a>(&amp;mut self, dep: &amp;<a class="struct" href="../../../cargo/core/dependency/struct.Dependency.html" title="struct cargo::core::dependency::Dependency">Dependency</a>) -&gt; <a class="type" href="../../../cargo/util/errors/type.CargoResult.html" title="type cargo::util::errors::CargoResult">CargoResult</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="struct" href="../../../cargo/core/summary/struct.Summary.html" title="struct cargo::core::summary::Summary">Summary</a>&gt;&gt;</code></span><span class='out-of-band'><div class='ghost'></div><a class='srclink' href='../../../src/cargo/core/registry.rs.html#21-25' title='goto source code'>[src]</a></span></h4>
</div></section>
    <section id='search' class="content hidden"></section>

    <section class="footer"></section>

    <aside id="help" class="hidden">
        <div>
            <h1 class="hidden">Help</h1>

            <div class="shortcuts">
                <h2>Keyboard Shortcuts</h2>

                <dl>
                    <dt>?</dt>
                    <dd>Show this help dialog</dd>
                    <dt>S</dt>
                    <dd>Focus the search field</dd>
                    <dt>↑</dt>
                    <dd>Move up in search results</dd>
                    <dt>↓</dt>
                    <dd>Move down in search results</dd>
                    <dt>↹</dt>
                    <dd>Switch tab</dd>
                    <dt>&#9166;</dt>
                    <dd>Go to active search result</dd>
                    <dt style="width:31px;">+ / -</dt>
                    <dd>Collapse/expand all sections</dd>
                </dl>
            </div>

            <div class="infos">
                <h2>Search Tricks</h2>

                <p>
                    Prefix searches with a type followed by a colon (e.g.
                    <code>fn:</code>) to restrict the search to a given type.
                </p>

                <p>
                    Accepted types are: <code>fn</code>, <code>mod</code>,
                    <code>struct</code>, <code>enum</code>,
                    <code>trait</code>, <code>type</code>, <code>macro</code>,
                    and <code>const</code>.
                </p>

                <p>
                    Search functions by type signature (e.g.
                    <code>vec -> usize</code> or <code>* -> vec</code>)
                </p>
            </div>
        </div>
    </aside>

    

    <script>
        window.rootPath = "../../../";
        window.currentCrate = "cargo";
    </script>
    <script src="../../../main.js"></script>
    <script defer src="../../../search-index.js"></script>
</body>
</html>